(function(){function u(){}function v(){}function w(a,c,e){this.init(a,[c],[e||(a&&1<a.length?a.slice(1):a)])}function z(){}function H(a,c,e){arguments.length&&(this.parent=a,this.prev=c||0,this.next=e||0,this.jQinit(this.fold(r(),function(h,k){return k.jQ.add(h)})))}function ta(a,c,e,h){function k(){R=x;var n=t.selection?t.selection.latex():"";E.val(n);n&&(E[0].select?E[0].select():document.selection&&(n=E[0].createTextRange(),n.expand("textedit"),n.select()))}function m(n){t.seek(r(n.target),n.pageX,
n.pageY);if(t.prev!==S.prev||t.parent!==S.parent)M=0,t.selectFrom(S);return!1}function p(n){delete n.target;return m(n)}function l(n){t.blink=Ka;t.selection||(h?t.show():W.detach());a.unbind("mousemove",m);r(document).unbind("mousemove",p).unbind("mouseup",l)}function y(){var n=E.val();"$"===n.slice(0,1)&&"$"===n.slice(-1)&&(n=n.slice(1,-1));n=n.replace(/ /g,"#");t.writeLatex(n).show();E.val("")}function T(){if(!ca){var n=E.val();if(n){E.val("");for(var ka=0;ka<n.length;ka+=1)t.parent.textInput(n.charAt(ka))}else(t.selection||
R!==x)&&k()}}var G=a.contents().detach();e||a.addClass("mathquill-rendered-math");c.jQ=a.data("[[mathquill internal data]]",{block:c,revert:function(){a.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(G)}});var t=c.cursor=new la(c);c.renderLatex(G.text());var W=c.textarea=r('<span class="textarea"><textarea></textarea></span>'),E=W.children(),R;c.selectionChanged=function(){R===x&&(R=setTimeout(k));ua(a[0])};a.bind("selectstart.mathquill",
function(n){n.target!==E[0]&&n.preventDefault();n.stopPropagation()});var S=0,Ka=t.blink,va,M=0;a.bind("mousedown.mathquill",function(n){setTimeout(function(){E.focus()});t.blink=r.noop;t.seek(r(n.target),n.pageX,n.pageY);h||a.prepend(W);M=t.parent===S.parent&&t.prev===S.prev?M+1:1;clearTimeout(va);va=setTimeout(function(){M=0},500);if(3===M)for(M=0,t.clearSelection().appendTo(c);t.prev;)t.selectLeft();else 2===M?t.selectWord():(S=new H(t.parent,t.prev,t.next),a.mousemove(m),r(document).mousemove(p));
r(document).mouseup(l);return!1});if(h){a.prepend(W);a.addClass("mathquill-editable");e&&a.addClass("mathquill-textbox");E.focus(function(n){c.hidePlaceholder();t.parent||t.appendTo(c);t.parent.jQ.addClass("hasCursor");t.selection?(t.selection.jQ.removeClass("blur"),setTimeout(c.selectionChanged)):t.show();n.stopPropagation();r(this).trigger("focus.mathquill")}).blur(function(n){t.hide().parent.blur();t.selection&&t.selection.jQ.addClass("blur");c.showPlaceholder();n.stopPropagation();r(this).trigger("blur.mathquill")});
a.bind("focus.mathquill blur.mathquill",function(n){E.trigger(n)}).blur();a.bind("cut",function(n){k();t.selection&&setTimeout(function(){t.deleteSelection();t.redraw()});n.stopPropagation()}).bind("copy",function(n){k();ca=!0;n.stopPropagation()}).bind("paste",function(n){ca=!0;setTimeout(y);n.stopPropagation()});var wa,ma,xa,ca=!1;a.bind("keydown.mathquill",function(n){wa=n;ma=!0;!1===t.parent.keydown(n)&&n.preventDefault()}).bind("keypress.mathquill",function(n){if(ma)ma=!1;else{if(xa!==n.which)return;
t.parent.keydown(wa)}xa=n.which;R!==x&&clearTimeout(R);ca=!1;n=navigator.userAgent||navigator.vendor||window.opera;"iOS"===(/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)&&!window.MSStream?"iOS":"unknown")?setTimeout(T,100):setTimeout(T)})}else{a.bind("cut paste",!1).bind("copy",k).prepend('<span class="selectable"></span>');E.blur(function(){t.clearSelection();setTimeout(n)});function n(){W.detach()}}}function da(){}function ea(a){this.init("$");this.firstChild.cursor=a;this.firstChild.textInput=
function(c){this.skipTextInput||("$"!==c||a.parent!==this?a.write(c):this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(new g("\\$","$")).show():a.next?a.prev?a.write(c):a.insertBefore(this.parent):a.insertAfter(this.parent))}}function ya(){}function A(a,c){c.prototype=a.prototype;return c}function d(a){var c=Array.prototype.slice.call(arguments,1);return A(a,function(){a.apply(this,Array.prototype.concat.apply(c,arguments))})}function N(a,c,e){this.init(a,[c],x,e)}function D(a,c,e){this.init(a,
['<span class="diacritic"><span class="diacritic-char">'+c+"&nbsp;</span></span>","<span></span>"],x,e)}function X(a,c,e,h,k){this.stretchFactor=h;this.init(a,['<span class="diacritic"><span class="'+c+'">'+e+"&nbsp;</span></span>","<span></span>"],x,k)}function I(a,c,e,h){this.init(a,[c],[e],h)}function fa(a){this.init("\\frac",x,x,a);this.jQ.append('<span style="display:inline-block;width:0">&nbsp;</span>')}function na(){fa.apply(this,arguments)}function ha(a){this.init("\\sqrt",x,x,a)}function za(a){this.init("\\longdivision",
x,x,a)}function Aa(a){ha.call(this,a);this.jQ=this.firstChild.jQ.detach().add(this.jQ)}function F(a,c,e,h,k){this.init("\\left"+e,['<span class="block"><span class="paren">'+a+'</span><span class="block"></span><span class="paren">'+c+"</span></span>"],[a,c],k);this.end="\\right"+h}function O(a,c,e,h,k){F.apply(this,arguments)}function P(a,c,e){F.call(this,a,c,a,c,e)}function Y(a,c,e){O.call(this,a,c,a,c,e)}function Ba(a){P.call(this,"|","|",a)}function J(a){a instanceof H?this.replacedText=a.remove().jQ.text():
"string"===typeof a&&(this.replacedText=a);this.init()}function Ca(){}function K(a,c){function e(){J.apply(this,arguments)}f=e.prototype=new J;f.cmd=a;f.html_template=[c];return e}function Da(a){this.init("\\");a&&(this.replacedFragment=a.detach(),this.isEmpty=function(){return!1})}function oa(a){this.init("\\twostack",x,x,a);this.jQ.wrapInner('<span class="array"></span>');this.blockjQ=this.jQ.children()}function ia(a){this.init("\\binom",x,x,a);this.jQ.wrapInner('<span class="array"></span>');this.blockjQ=
this.jQ.children();this.bracketjQs=r('<span class="paren">(</span>').prependTo(this.jQ).add(r('<span class="paren">)</span>').appendTo(this.jQ))}function Ea(){ia.apply(this,arguments)}function Fa(a){this.init("\\vector",x,x,a)}function pa(a,c,e,h){this.rows=e;this.cols=h;this.init("\\matrix",x,x,a);this.envName="matrix"}function Ga(){}function U(a,c,e){function h(k,m,p,l){this.rows=p;this.cols=l;this.init("\\"+a,x,x,k);this.envName=a;k=this.blockjQ=this.tablejQ;this.bracketjQs=k.prev().add(k.next())}
f=h.prototype=new Ga;f.html_template=['<span class="block"><span class="paren">'+c+'</span><table class="matrix"></table><span class="paren">'+e+"</span></span>"];f.initBlocks=function(k){this.tablejQ=this.jQ.find("table");this.initMatrix(k)};f.redraw=F.prototype.redraw;b[a]=h}function B(a,c){w.call(this,a,"<var>"+(c||a)+"</var>")}function g(a,c){w.call(this,a,"<span>"+(c||a)+"</span>")}function qa(a,c){w.call(this,a,"<span>"+(c||a)+"</span>")}function Ha(){g.call(this,"\\:"," ")}function V(a,c){w.call(this,
a,'<span class="nonSymbola">'+(c||a)+"</span>")}function q(a,c,e){w.call(this,a,'<span class="binary-operator">'+c+"</span>",e)}function Z(a,c){g.apply(this,arguments)}function L(a,c){w.call(this,a,"<big>"+c+"</big>")}function ja(a,c){w.call(this,"\\"+c+" ","<span>"+c+"</span>")}function la(a){this.parent=this.root=a;var c=this.jQ=this._jQ=r('<span class="cursor">&#8203;</span>');this.blink=function(){c.toggleClass("blink")}}function aa(a,c,e){H.apply(this,arguments)}var r=jQuery,x,ba=Math.min,ra=
Math.max;var f=u.prototype;f.prev=0;f.next=0;f.parent=0;f.firstChild=0;f.lastChild=0;f.eachChild=function(a){for(var c=this.firstChild;c&&!1!==a.call(this,c);c=c.next);return this};f.foldChildren=function(a,c){this.eachChild(function(e){a=c.call(this,a,e)});return a};f.keydown=function(a){return this.parent.keydown(a)};f.textInput=function(a){return this.parent.textInput(a)};f=v.prototype=new u;f.init=function(a,c,e,h){a&&(this.cmd=a);c&&(this.html_template=c);e&&(this.text_template=e);this.jQ=r(this.html_template[0]).data("[[mathquill internal data]]",
{cmd:this});this.initBlocks(h)};f.initBlocks=function(a){if(1===this.html_template.length)this.firstChild=this.lastChild=this.jQ.data("[[mathquill internal data]]").block=a&&a.blockify()||new z,this.firstChild.parent=this,this.firstChild.jQ=this.jQ.append(this.firstChild.jQ);else{var c,e=this.html_template.length;this.firstChild=a=c=a&&a.blockify()||new z;a.parent=this;a.jQ=r(this.html_template[1]).data("[[mathquill internal data]]",{block:a}).append(a.jQ).appendTo(this.jQ);a.blur();for(var h=2;h<
e;h+=1)a=new z,a.parent=this,a.prev=c,c=c.next=a,a.jQ=r(this.html_template[h]).data("[[mathquill internal data]]",{block:a}).appendTo(this.jQ),a.blur();this.lastChild=a}};f.latex=function(){return this.foldChildren(this.cmd,function(a,c){return a+"{"+(c.latex()||" ")+"}"})};f.text_template=[""];f.text=function(){var a=0;return this.foldChildren(this.text_template[a],function(c,e){a+=1;var h=e.text();return c&&"("===this.text_template[a]&&"("===h[0]&&")"===h.slice(-1)?c+h.slice(1,-1)+this.text_template[a]:
c+e.text()+(this.text_template[a]||"")})};f.insertAt=function(a){this.parent=a.parent;this.next=a.next;(this.prev=a.prev)?a.prev.next=this:a.parent.firstChild=this;a.next?a.next.prev=this:a.parent.lastChild=this;a.prev=this;this.jQ.insertBefore(a.jQ);this.respace();this.next&&this.next.respace();this.prev&&this.prev.respace();this.placeCursor(a);a.redraw();if("\\matrixmid "==this.cmd){for(a=this.parent;a&&"\\left("!=a.cmd;)a=a.parent;a&&(a=a.blockjQ.outerHeight()/+a.blockjQ.css("fontSize").slice(0,
-2),Q(this.jQ,ba(1+.2*(a-1),1.2),.98*a),this.jQ.addClass("paren"))}};f.respace=r.noop;f.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,function(c,e){return c.isEmpty()?c:e}))};f.precedence=0;f.isEmpty=function(){return this.foldChildren(!0,function(a,c){return a&&c.isEmpty()})};f.remove=function(){var a=this.prev,c=this.next,e=this.parent;a?a.next=c:e.firstChild=c;c?c.prev=a:e.lastChild=a;this.jQ.remove();return this};f=w.prototype=new v;f.initBlocks=r.noop;f.latex=function(){return this.cmd};
f.text=function(){return this.text_template};f.placeCursor=r.noop;f.isEmpty=function(){return!0};f=z.prototype=new u;f.latex=function(){return this.foldChildren("",function(a,c){return a+c.latex()})};f.text=function(){return this.firstChild===this.lastChild?this.firstChild.text():this.foldChildren("(",function(a,c){return a+c.text()})+")"};f.isEmpty=function(){return 0===this.firstChild&&0===this.lastChild};f.focus=function(){this.jQ.addClass("hasCursor");this.isEmpty()&&this.jQ.removeClass("empty");
return this};f.blur=function(){this.jQ.removeClass("hasCursor");this.isEmpty()&&this.jQ.addClass("empty");return this};f=H.prototype;f.remove=v.prototype.remove;f.jQinit=function(a){this.jQ=a};f.each=function(a){for(var c=this.prev.next||this.parent.firstChild;c!==this.next&&!1!==a.call(this,c);c=c.next);return this};f.fold=function(a,c){this.each(function(e){a=c.call(this,a,e)});return a};f.latex=function(){return this.fold("",function(a,c){return a+c.latex()})};f.blockify=function(){var a=this.prev,
c=this.next,e=this.parent,h=new z,k=h.firstChild=a.next||e.firstChild,m=h.lastChild=c.prev||e.lastChild;a?a.next=c:e.firstChild=c;c?c.prev=a:e.lastChild=a;k.prev=this.prev=0;m.next=this.next=0;this.parent=h;this.each(function(p){p.parent=h});h.jQ=this.jQ;return h};f=da.prototype=new z;f.latex=function(){return z.prototype.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};f.text=function(){return this.foldChildren("",function(a,c){return a+c.text()})};f.renderLatex=function(a){this.jQ.children().slice(1).remove();
this.firstChild=this.lastChild=0;this.cursor.appendTo(this).writeLatex(a);this.blur()};f.setPlaceholder=function(a){this.placeholder=a};f.showPlaceholder=function(){this.placeholder&&this.isEmpty()&&(this.cursor.writeLatex(this.placeholder),this.blur(),this.firstChild=this.lastChild=0,this.jQ.addClass("placeholder"))};f.hidePlaceholder=function(){this.placeholder&&this.isEmpty()&&(this.jQ.removeClass("placeholder").children().slice(1).remove(),this.cursor.appendTo(this))};f.keydown=function(a){a.ctrlKey=
a.ctrlKey||a.metaKey;switch(a.originalEvent&&a.originalEvent.keyIdentifier||a.which){case 8:case "Backspace":case "U+0008":if(a.ctrlKey)for(;this.cursor.prev||this.cursor.selection;)this.cursor.backspace();else this.cursor.backspace();break;case 27:case "Esc":case "U+001B":case 9:case "Tab":case "U+0009":if(a.ctrlKey)break;var c=this.cursor.parent;if(a.shiftKey){if(c===this.cursor.root)return this.skipTextInput=!0;c.prev?this.cursor.appendTo(c.prev):this.cursor.insertBefore(c.parent)}else{if(c===
this.cursor.root)return this.skipTextInput=!0;c.next?this.cursor.prependTo(c.next):this.cursor.insertAfter(c.parent)}this.cursor.clearSelection();break;case 13:case "Enter":return this.skipTextInput=!0;case 35:case "End":if(a.shiftKey)for(;this.cursor.next||a.ctrlKey&&this.cursor.parent!==this;)this.cursor.selectRight();else this.cursor.clearSelection().appendTo(a.ctrlKey?this:this.cursor.parent);break;case 36:case "Home":if(a.shiftKey)for(;this.cursor.prev||a.ctrlKey&&this.cursor.parent!==this;)this.cursor.selectLeft();
else this.cursor.clearSelection().prependTo(a.ctrlKey?this:this.cursor.parent);break;case 37:case "Left":if(a.ctrlKey&&this.cursor.prev){for(c=a.shiftKey?"selectLeft":"hopLeft";this.cursor.prev&&0!==this.cursor.prev.precedence;)this.cursor[c]();for(;this.cursor.prev&&0===this.cursor.prev.precedence;)this.cursor[c]();a.shiftKey||this.cursor.show();break}a.shiftKey?this.cursor.selectLeft():this.cursor.moveLeft();break;case 38:case "Up":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.prev)for(;this.cursor.prev;)this.cursor.selectLeft();
else this.cursor.selectLeft();else this.cursor.parent.prev?this.cursor.clearSelection().appendTo(this.cursor.parent.prev):this.cursor.prev?this.cursor.clearSelection().prependTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertBefore(this.cursor.parent.parent);break;case 39:case "Right":if(a.ctrlKey&&this.cursor.next){for(c=a.shiftKey?"selectRight":"hopRight";this.cursor.next&&0===this.cursor.next.precedence;)this.cursor[c]();for(;this.cursor.next&&0!==this.cursor.next.precedence;)this.cursor[c]();
a.shiftKey||this.cursor.show();break}a.shiftKey?this.cursor.selectRight():this.cursor.moveRight();break;case 40:case "Down":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.next)for(;this.cursor.next;)this.cursor.selectRight();else this.cursor.selectRight();else this.cursor.parent.next?this.cursor.clearSelection().prependTo(this.cursor.parent.next):this.cursor.next?this.cursor.clearSelection().appendTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertAfter(this.cursor.parent.parent);
break;case 46:case "Del":case "U+007F":if(a.ctrlKey)for(;this.cursor.next||this.cursor.selection;)this.cursor.deleteForward();else this.cursor.deleteForward();break;case 65:case "A":case "U+0041":if(a.ctrlKey&&!a.shiftKey&&!a.altKey){if(this!==this.cursor.root)return this.parent.keydown(a);for(this.cursor.clearSelection().appendTo(this);this.cursor.prev;)this.cursor.selectLeft();break}default:return this.skipTextInput=!1,!0}this.skipTextInput=!0;return!1};f.textInput=function(a){this.skipTextInput||
this.cursor.write(a)};f=ea.prototype=new v;f.html_template=['<span class="mathquill-rendered-math"></span>'];f.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data("[[mathquill internal data]]").block=new da;this.firstChild.parent=this;this.firstChild.jQ=this.jQ};f.latex=function(){return"$"+this.firstChild.latex()+"$"};f=ya.prototype=new z;f.renderLatex=function(a){var c=this.cursor;this.jQ.children().slice(1).remove();this.firstChild=this.lastChild=0;c.show().appendTo(this);a=a.match(/(?:\\\$|[^$])+|\$(?:\\\$|[^$])*\$|\$(?:\\\$|[^$])*$/g)||
"";for(var e=0;e<a.length;e+=1){var h=a[e];if("$"===h[0]){h="$"===h[-1+h.length]&&"\\"!==h[-2+h.length]?h.slice(1,-1):h.slice(1);var k=new ea(c);c.insertNew(k);k.firstChild.renderLatex(h);c.show().insertAfter(k)}else for(k=0;k<h.length;k+=1)this.cursor.insertNew(new g(h[k]))}};f.keydown=da.prototype.keydown;f.textInput=function(a){this.skipTextInput||(this.cursor.deleteSelection(),"$"===a?this.cursor.insertNew(new ea(this.cursor)):this.cursor.insertNew(new g(a)))};var C={},b={},ua=r.noop,Ia=document.createElement("div").style,
La={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},sa;for(sa in La)if(sa in Ia){var Ja=sa;break}if(Ja)var Q=function(a,c,e){a.css(Ja,"scale("+c+","+e+")")};else"filter"in Ia?(ua=function(a){a.className=a.className},Q=function(a,c,e){function h(){a.css("marginRight",(1+l.width()*(p-1))/p+"px")}var k=e>c?"M11=":"M22=",m=ra(c,e),p=ba(c,e);p/=1+(m-1)/2;0===a.children().length&&a.wrapInner("<span></span>");a.addClass("matrixed").css({fontSize:m+"em",marginTop:"-.175em"});var l=
a.children().css({filter:"progid:DXImageTransform.Microsoft.Matrix("+k+p+",SizingMethod='auto expand')"});h();var y=setInterval(h);r(window).load(function(){clearTimeout(y);h()})}):Q=function(a,c,e){a.css("fontSize",ra(c,e)+"em")};A(v,N);b.mathrm=d(N,"\\mathrm",'<span class="roman font"></span>');b.mathit=d(N,"\\mathit",'<i class="font"></i>');b.mathbf=d(N,"\\mathbf",'<b class="font"></b>');b.mathsf=d(N,"\\mathsf",'<span class="sans-serif font"></span>');b.mathtt=d(N,"\\mathtt",'<span class="monospace font"></span>');
b.underline=d(N,"\\underline",'<span class="underline"></span>');f=D.prototype=new v;f.redraw=f._redraw=function(){var a=!this.firstChild.isEmpty();this.firstChild.eachChild(function(h){return a=a&&h.cmd in{a:1,c:1,e:1,g:1,m:1,n:1,o:1,p:1,q:1,r:1,s:1,u:1,v:1,w:1,x:1,y:1,z:1}});this.jQ.children(":first").toggleClass("lowercase",a);var c=!a&&this.firstChild.firstChild===this.lastChild.lastChild&&"t"===this.firstChild.firstChild.cmd;this.jQ.children(":first").toggleClass("only-lowercase-t",c);if(a)e=
!0;else{var e=!0;this.firstChild.eachChild(function(h){return e=e&&h instanceof w&&!(h instanceof L)})}this.jQ.toggleClass("block",!e)};r.browser.webkit&&(f.redraw=function(){this._redraw();this.webkitForceRedrawToggle=!this.webkitForceRedrawToggle;this.jQ.children(":first").css("display",this.webkitForceRedrawToggle?"inline-block":"")});b.grave=d(D,"\\grave","&#768;");b.acute=d(D,"\\acute","&#769;");b.hat=b.circumflex=d(D,"\\hat","&#770;");b.tilde=d(D,"\\tilde","&#771;");b.bar=d(D,"\\bar","&#773;");
b.breve=d(D,"\\breve","&#774;");b.dot=d(D,"\\dot","&#775;");b.ddot=d(D,"\\ddot","&#776;");b.check=b.caron=d(D,"\\ddot","&#780;");b.dddot=d(D,"\\dddot","&#8411;");b.ddddot=d(D,"\\ddddot","&#8412;");b.vec=d(D,"\\vec","&#8407;");b.overline=A(D,function(a){this.init("\\overline",['<span class="diacritic"><span class="overline"></span></span>'],x,a)});f=X.prototype=new D;f.redraw=function(){this._redraw();var a=ra(1,this.stretchFactor*this.jQ.innerWidth()/+this.jQ.css("fontSize").slice(0,-2));Q(this.jQ.children(":first"),
a,1.2)};b.widehat=d(X,"\\widehat","widehat","&#770;",2.95);b.overleftarrow=d(X,"\\overleftarrow","overarrow","&#8406;",2);b.overrightarrow=d(X,"\\overrightarrow","overarrow","&#8407;",2);b.overarc=d(X,"\\overarc","overarc","&#x25E0;",1.5);f=I.prototype=new v;f.latex=function(){var a=this.firstChild.latex();return 1===a.length?this.cmd+a:this.cmd+"{"+(a||" ")+"}"};f.redraw=function(){this.prev&&this.prev.respace();this.prev instanceof I||(this.respace(),!this.next||this.next instanceof I||this.next.respace())};
f.respace=function(){"\\int "===this.prev.cmd||this.prev instanceof I&&this.prev.cmd!=this.cmd&&this.prev.prev&&"\\int "===this.prev.prev.cmd?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit"));if(this.respaced=this.prev instanceof I&&this.prev.cmd!=this.cmd&&!this.prev.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),c=this.prev.jQ.outerWidth();thisWidth=this.jQ.outerWidth();"_"===this.cmd&&"^"===this.prev.cmd&&"\\left["===this.prev.prev.cmd?
this.jQ.css({left:(this.limit&&"_"===this.cmd?-.25:0)-c/a+"em",marginRight:"",verticalAlign:"-0.8em"}):this.jQ.css({left:(this.limit&&"_"===this.cmd?-.25:0)-c/a+"em",marginRight:.1-ba(thisWidth,c)/a+"em"})}else"\\left["===this.prev.cmd&&"_"===this.cmd?this.jQ.css({marginRight:"",verticalAlign:"-0.8em"}):this.limit&&"_"===this.cmd?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this.prev instanceof L&&(this.precedence=this.prev.precedence);this.respaced&&this.prev.prev instanceof
L?this.precedence=this.prev.prev.precedence:delete this.precedence;this.next instanceof I&&this.next.respace();return this};b.subscript=b._=A(I,function(a){this.init("_",["<sub></sub>"],["_"],a)});b.superscript=b.supscript=b["^"]=A(I,function(a){this.init("^",["<sup></sup>"],["**"],a)});f=fa.prototype=new v;f.html_template=['<span class="fraction"></span>','<span class="numerator"></span>','<span class="denominator"></span>'];f.text_template=["(","/",")"];b.frac=b.dfrac=b.cfrac=b.fraction=fa;f=na.prototype=
new fa;f.placeCursor=function(a){if(this.firstChild.isEmpty()){for(var c=this.prev;c&&0===c.precedence&&"\\int "!=c.cmd&&"\\lim "!=c.cmd&&"\\sum "!=c.cmd&&","!=c.cmd&&"^"!=c.cmd&&"_"!=c.cmd;)c=c.prev;c!==this.prev?(c=(new H(this.parent,c,this)).blockify(),c.jQ=this.firstChild.jQ.empty().removeClass("empty").append(c.jQ).data("[[mathquill internal data]]",{block:c}),c.next=this.lastChild,c.parent=this,this.firstChild=this.lastChild.prev=c,a.appendTo(this.lastChild)):a.appendTo(this.firstChild)}else a.appendTo(this.lastChild)};
b.over=C["/"]=na;f=ha.prototype=new v;f.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<span class="sqrt-stem"></span>'];f.text_template=["sqrt(",")"];f.redraw=function(){var a=this.lastChild.jQ;Q(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)};b.sqrt=b["\u221a"]=ha;f=za.prototype=new v;f.html_template=['<span class="block"><span class="sqrt-prefix longdivision">|</span></span>','<span class="sqrt-stem"></span>'];f.text_template=["longdivision(",
")"];b.longdivision=za;f=Aa.prototype=new ha;f.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<sup class="nthroot"></sup>','<span class="sqrt-stem"></span>'];f.text_template=["sqrt[","](",")"];f.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"};b.nthroot=Aa;f=F.prototype=new v;f.initBlocks=function(a){this.firstChild=this.lastChild=a&&a.blockify()||new z;this.firstChild.parent=this;this.firstChild.jQ=this.jQ.children(":eq(1)").data("[[mathquill internal data]]",
{block:this.firstChild}).append(this.firstChild.jQ);a=this.blockjQ=this.firstChild.jQ;this.bracketjQs=a.prev().add(a.next())};f.latex=function(){return this.cmd+this.firstChild.latex()+this.end};f.redraw=function(){var a=this.blockjQ.outerHeight()/+this.blockjQ.css("fontSize").slice(0,-2);Q(this.bracketjQs,ba(1+.2*(a-1),1.2),1.05*a)};b.lbrace=C["{"]=A(F,function(a){F.call(this,"{","}","\\{","\\}",a)});b.langle=b.lang=A(F,function(a){F.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)});f=O.prototype=
new F;f.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):(this.firstChild.blur(),this.redraw())};b.rbrace=C["}"]=A(O,function(a){O.call(this,"{","}","\\{","\\}",a)});b.rangle=b.rang=A(O,function(a){O.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)});P.prototype=F.prototype;b.lparen=C["("]=A(P,function(a){P.call(this,"(",")",a)});b.lbrack=b.lbracket=C["["]=A(P,function(a){P.call(this,
"[","]",a)});Y.prototype=O.prototype;b.rparen=C[")"]=A(Y,function(a){Y.call(this,"(",")",a)});b.rbrack=b.rbracket=C["]"]=A(Y,function(a){Y.call(this,"[","]",a)});f=Ba.prototype=new P;f.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):a.appendTo(this.firstChild)};b.lpipe=b.rpipe=C["|"]=Ba;f=J.prototype=new v;f.cmd="\\text";f.html_template=['<span class="text"></span>'];f.text_template=
['"','"'];f.precedence=.25;f.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data("[[mathquill internal data]]").block=new Ca;this.firstChild.parent=this;this.firstChild.jQ=this.jQ.append(this.firstChild.jQ)};f.placeCursor=function(a){(this.cursor=a).appendTo(this.firstChild);if(this.replacedText)for(a=0;a<this.replacedText.length;a+=1)this.write(this.replacedText.charAt(a))};f.write=function(a){this.cursor.insertNew(new g(a))};f.keydown=function(a){return this.cursor.selection||(8!==
a.which||this.cursor.prev)&&(46!==a.which||this.cursor.next)?this.parent.keydown(a):(this.isEmpty()&&this.cursor.insertAfter(this),!1)};f.textInput=function(a){this.cursor.deleteSelection();"$"!==a?this.write(a):this.isEmpty()?this.cursor.insertAfter(this).backspace().insertNew(new g("\\$","$")):this.cursor.next?this.cursor.prev?(a=new J(new H(this.firstChild,this.cursor.prev)),a.placeCursor=function(c){this.prev=0;delete this.placeCursor;this.placeCursor(c)},a.firstChild.focus=function(){return this},
this.cursor.insertAfter(this).insertNew(a),a.prev=this,this.cursor.insertBefore(a),delete a.firstChild.focus):this.cursor.insertBefore(this):this.cursor.insertAfter(this)};f=Ca.prototype=new z;f.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,c=a.cursor;c.parent===this?this.jQ.addClass("empty"):(c.hide(),a.remove(),c.next===a?c.next=a.next:c.prev===a&&(c.prev=a.prev),c.show().redraw())}return this};f.focus=function(){z.prototype.focus.call(this);var a=this.parent;
if(a.next.cmd===a.cmd){var c=this,e=a.cursor;a=a.next.firstChild;a.eachChild(function(h){h.parent=c;h.jQ.appendTo(c.jQ)});this.lastChild?this.lastChild.next=a.firstChild:this.firstChild=a.firstChild;a.firstChild.prev=this.lastChild;this.lastChild=a.lastChild;a.parent.remove();e.prev?e.insertAfter(e.prev):e.prependTo(this);e.redraw()}else a.prev.cmd===a.cmd&&(e=a.cursor,e.prev?a.prev.firstChild.focus():e.appendTo(a.prev.firstChild));return this};C.$=b.text=b.textnormal=b.textrm=b.textup=b.textmd=J;
b.em=b.italic=b.italics=b.emph=b.textit=b.textsl=K("\\textit",'<i class="text"></i>');b.strong=b.bold=b.textbf=K("\\textbf",'<b class="text"></b>');b.sf=b.textsf=K("\\textsf",'<span class="sans-serif text"></span>');b.tt=b.texttt=K("\\texttt",'<span class="monospace text"></span>');b.textsc=K("\\textsc",'<span style="font-variant:small-caps" class="text"></span>');b.uppercase=K("\\uppercase",'<span style="text-transform:uppercase" class="text"></span>');b.lowercase=K("\\lowercase",'<span style="text-transform:lowercase" class="text"></span>');
b.linethrough=K("\\linethrough",'<span style="text-decoration:line-through red" class="text"></span>');f=Da.prototype=new v;f.html_template=['<span class="latex-command-input">\\</span>'];f.text_template=["\\"];f.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild);this.replacedFragment&&(this.jQ=this.jQ.add(this.replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(c){r(c.target=this.nextSibling).trigger(c);return!1}).insertBefore(this.jQ)))};f.latex=function(){return"\\"+
this.firstChild.latex()+" "};f.keydown=function(a){return 9===a.which||13===a.which?(this.renderCommand(),!1):this.parent.keydown(a)};f.textInput=function(a){a.match(/[a-z]/i)?(this.cursor.deleteSelection(),this.cursor.insertNew(new g(a))):(this.renderCommand()," "===a||"\\"===a&&this.firstChild.isEmpty()||this.cursor.parent.textInput(a))};f.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex();
a?this.cursor.insertCmd(a,this.replacedFragment):(a=new g("\\backslash ","\\"),this.cursor.insertNew(a),this.replacedFragment&&this.replacedFragment.remove())};C["\\"]=Da;f=oa.prototype=new v;f.html_template=['<span class="block"></span>',"<span></span>","<span></span>"];f.text_template=["twostack(",",",")"];f.redraw=oa.prototype.redraw;b.twostack=oa;f=ia.prototype=new v;f.html_template=['<span class="block"></span>',"<span></span>","<span></span>"];f.text_template=["choose(",",",")"];f.redraw=F.prototype.redraw;
b.binom=b.binomial=ia;f=Ea.prototype=new ia;f.placeCursor=na.prototype.placeCursor;b.choose=Ea;f=Fa.prototype=new v;f.html_template=['<span class="array"></span>',"<span></span>"];f.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,c){a.push(c.latex());return a}).join("\\\\ ")+"\\end{matrix}"};f.text=function(){return"["+this.foldChildren([],function(a,c){a.push(c.text());return a}).join()+"]"};f.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild)};f.keydown=function(a){var c=
this.cursor.parent;if(c.parent===this){if(13===a.which)return a=new z,a.parent=this,a.jQ=r("<span></span>").data("[[mathquill internal data]]",{block:a}).insertAfter(c.jQ),c.next?c.next.prev=a:this.lastChild=a,a.next=c.next,c.next=a,a.prev=c,this.cursor.appendTo(a).redraw(),!1;if(9===a.which&&!a.shiftKey&&!c.next){if(c.isEmpty())return c.prev?(this.cursor.insertAfter(this),delete c.prev.next,this.lastChild=c.prev,c.jQ.remove(),this.cursor.redraw(),!1):this.parent.keydown(a);a=new z;a.parent=this;
a.jQ=r("<span></span>").data("[[mathquill internal data]]",{block:a}).appendTo(this.jQ);this.lastChild=a;c.next=a;a.prev=c;this.cursor.appendTo(a).redraw();return!1}if(8===a.which){if(c.isEmpty())return c.prev?(this.cursor.appendTo(c.prev),c.prev.next=c.next):(this.cursor.insertBefore(this),this.firstChild=c.next),c.next?c.next.prev=c.prev:this.lastChild=c.prev,c.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.cursor.redraw(),!1;if(!this.cursor.prev)return!1}}return this.parent.keydown(a)};
b.vector=Fa;f=pa.prototype=new v;f.html_template=['<table class="matrix"/>'];f.initBlocks=function(a){this.tablejQ=this.jQ;this.initMatrix(a)};f.initMatrix=function(a){if(this.rows===x){do{var c=prompt('Please enter the number of rows and columns in the NxM format.\nFor example, for a 2x3 matrix, please enter "2x3" (without quotes):').split(/[x ,]/);if(2===c.length)var e=parseInt(c[0]),h=parseInt(c[1])}while(!(0<e&&0<h))}else e=this.rows,h=this.cols;var k;c=0;this.matrix=[];for(var m=0;m<e;m+=1){var p=
[];this.matrix.push(p);for(var l=p.jQ=r("<tr/>").appendTo(this.tablejQ),y=0;y<h;y+=1)0===m&&0===y?this.firstChild=k=a&&a.blockify()||new z:k=new z,k.parent=this,k.prev=c,c=c.next=k,k.row=m,k.col=y,k.jQ=r("<td/>").data("[[mathquill internal data]]",{block:k}).append(k.jQ).appendTo(l),p.push(k),k.blur()}this.lastChild=c};f.latex=function(){for(var a=[],c=0;c<this.matrix.length;c+=1){for(var e=[],h=this.matrix[c],k=0;k<h.length;k+=1)e.push(h[k].latex());a.push(e.join("&"))}return["\\begin{"+this.envName+
"}",a.join("\\\\ "),"\\end{"+this.envName+"}"].join("")};f.text=function(){for(var a=[],c=0;c<this.matrix.length;c+=1){for(var e=[],h=this.matrix[c],k=0;k<h.length;k+=1)e.push(h[k].text());a.push(e.join(", "))}return"[\n ["+a.join("],\n [")+"]\n]"};f.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild)};f.keydown=function(a){var c=this.cursor.parent;if(c.parent===this)if(8===a.which){if(!this.cursor.prev&&!this.cursor.selection)return!1}else if(46===a.which){if(!this.cursor.prev&&!this.cursor.selection)return!1}else if(/^13|38|40$/.test(a.which)){var e=
c.row;c=c.col;(13===a.which?a.shiftKey:38===a.which)?0<e&&this.cursor.appendTo(this.matrix[e-1][c]):e<this.matrix.length-1&&this.cursor.prependTo(this.matrix[e+1][c])}return this.parent.keydown(a)};f.textInput=function(a){if("\t"!==a&&"\n"!==a)return this.parent.textInput(a)};b.smallmatrix=b.matrix=pa;Ga.prototype=pa.prototype;U("pmatrix","(",")");U("bmatrix","[","]");U("Bmatrix","{","}");U("vmatrix","|","|");U("Vmatrix","&#8214;","&#8214;");U("cases","{","&nbsp;");b.editable=A(ea,function(){this.init("\\editable");
ta(this.jQ,this.firstChild,!1,!0);var a;this.placeCursor=function(c){a=c.appendTo(this.firstChild)};this.firstChild.blur=function(){a.prev===this.parent&&(delete this.blur,this.cursor.appendTo(this),z.prototype.blur.call(this))};this.latex=function(){return this.firstChild.latex()};this.text=function(){return this.firstChild.text()}});f=B.prototype=new w;f.text=function(){var a=this.cmd;!this.prev||this.prev instanceof B||this.prev instanceof q||(a="*"+a);!this.next||this.next instanceof q||"^"===
this.next.cmd||(a+="*");return a};g.prototype=w.prototype;qa.prototype=w.prototype;qa.redraw=function(){var a=this.blockjQ.outerHeight()/+this.blockjQ.css("fontSize").slice(0,-2);Q(this.bracketjQs,ba(1+.3*(a-1),1.3),1.05*a)};f=Ha.prototype=new g;f.precedence=.5;C[" "]=C["#"]=Ha;b.prime=b["'"]=C["'"]=d(g,"'","<big>\u2032</big>");V.prototype=w.prototype;b["@"]=V;b["&"]=d(V,"\\&","&");b["%"]=d(V,"\\%","%");b.alpha=b.beta=b.gamma=b.delta=b.zeta=b.eta=b.theta=b.iota=b.kappa=b.mu=b.nu=b.xi=b.rho=b.sigma=
b.tau=b.chi=b.psi=b.omega=A(w,function(a,c){B.call(this,"\\"+c+" ","&"+c+";")});b.phi=d(B,"\\phi ","&#981;");b.phiv=b.varphi=d(B,"\\varphi ","&phi;");b.epsilon=d(B,"\\epsilon ","&#1013;");b.epsiv=b.varepsilon=d(B,"\\varepsilon ","&epsilon;");b.piv=b.varpi=d(B,"\\varpi ","&piv;");b.sigmaf=b.sigmav=b.varsigma=d(B,"\\varsigma ","&sigmaf;");b.thetav=b.vartheta=b.thetasym=d(B,"\\vartheta ","&thetasym;");b.upsilon=b.upsi=d(B,"\\upsilon ","&upsilon;");b.gammad=b.Gammad=b.digamma=d(B,"\\digamma ","&#989;");
b.kappav=b.varkappa=d(B,"\\varkappa ","&#1008;");b.rhov=b.varrho=d(B,"\\varrho ","&#1009;");b.pi=b["\u03c0"]=d(V,"\\pi ","&pi;");b.lambda=d(V,"\\lambda ","&lambda;");b.Upsilon=b.Upsi=b.upsih=b.Upsih=d(w,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');b.Gamma=b.Delta=b.Theta=b.Lambda=b.Xi=b.Pi=b.Sigma=b.Phi=b.Psi=b.Omega=b.forall=A(w,function(a,c){g.call(this,"\\"+c+" ","&"+c+";")});f=q.prototype=new w;f.precedence=1;f=Z.prototype=new q;f.respace=function(){this.jQ[0].className=this.prev?
this.prev instanceof q&&this.next&&!(this.next instanceof q)?"unary-operator":"binary-operator":"";return this};b["+"]=d(Z,"+","+");b["\u2013"]=b["-"]=d(Z,"-","&minus;");b["\u00b1"]=b.pm=b.plusmn=b.plusminus=d(Z,"\\pm ","&plusmn;");b.mp=b.mnplus=b.minusplus=d(Z,"\\mp ","&#8723;");C["*"]=b.sdot=b.cdot=d(q,"\\cdot ","&middot;");b["="]=d(q,"=","=");b["<"]=d(q,"<","&lt;");b[">"]=d(q,">","&gt;");b.notin=b.sim=b.cong=b.equiv=b.oplus=b.otimes=A(q,function(a,c){q.call(this,"\\"+c+" ","&"+c+";")});b.times=
A(q,function(a,c){q.call(this,"\\times ","&times;","[x]")});b["\u00f7"]=b.div=b.divide=b.divides=d(q,"\\div ","&divide;","[/]");b["\u2260"]=b.ne=b.neq=d(q,"\\ne ","&ne;");b.ast=b.star=b.loast=b.lowast=d(q,"\\ast ","&lowast;");b.therefor=b.therefore=d(q,"\\therefore ","&there4;");b.cuz=b.because=d(q,"\\because ","&#8757;");b.prop=b.propto=d(q,"\\propto ","&prop;");b["\u2248"]=b.asymp=b.approx=d(q,"\\approx ","&asymp;");b.lt=d(q,"<","&lt;");b.gt=d(q,">","&gt;");b["\u2264"]=b.le=b.leq=d(q,"\\le ","&le;");
b["\u2265"]=b.ge=b.geq=d(q,"\\ge ","&ge;");b.isin=b["in"]=d(q,"\\in ","&isin;");b.ni=b.contains=d(q,"\\ni ","&ni;");b.notni=b.niton=b.notcontains=b.doesnotcontain=d(q,"\\not\\ni ","&#8716;");b.sub=b.subset=d(q,"\\subset ","&sub;");b.supset=b.superset=d(q,"\\supset ","&sup;");b.sup=ja;b.nsub=b.notsub=b.nsubset=b.notsubset=d(q,"\\not\\subset ","&#8836;");b.nsup=b.notsup=b.nsupset=b.notsupset=b.nsuperset=b.notsuperset=d(q,"\\not\\supset ","&#8837;");b.sube=b.subeq=b.subsete=b.subseteq=d(q,"\\subseteq ",
"&sube;");b.supe=b.supeq=b.supsete=b.supseteq=b.supersete=b.superseteq=d(q,"\\supseteq ","&supe;");b.nsube=b.nsubeq=b.notsube=b.notsubeq=b.nsubsete=b.nsubseteq=b.notsubsete=b.notsubseteq=d(q,"\\not\\subseteq ","&#8840;");b.nsupe=b.nsupeq=b.notsupe=b.notsupeq=b.nsupsete=b.nsupseteq=b.notsupsete=b.notsupseteq=b.nsupersete=b.nsuperseteq=b.notsupersete=b.notsuperseteq=d(q,"\\not\\supseteq ","&#8841;");L.prototype=new w;b["\u2211"]=b.sum=b.summation=d(L,"\\sum ","&sum;");b["\u220f"]=b.prod=b.product=d(L,
"\\prod ","&prod;");b.coprod=b.coproduct=d(L,"\\coprod ","&#8720;");b["\u222b"]=b["int"]=b.integral=d(L,"\\int ","&int;");b.N=b.naturals=b.Naturals=d(g,"\\mathbb{N}","&#8469;");b.P=b.primes=b.Primes=b.projective=b.Projective=b.probability=b.Probability=d(g,"\\mathbb{P}","&#8473;");b.Z=b.integers=b.Integers=d(g,"\\mathbb{Z}","&#8484;");b.Q=b.rationals=b.Rationals=d(g,"\\mathbb{Q}","&#8474;");b.R=b.reals=b.Reals=d(g,"\\mathbb{R}","&#8477;");b.C=b.complex=b.Complex=b.complexes=b.Complexes=b.complexplane=
b.Complexplane=b.ComplexPlane=d(g,"\\mathbb{C}","&#8450;");b.quad=b.emsp=d(g,"\\quad ","&nbsp;&nbsp;&nbsp;&nbsp;");b.qquad=d(g,"\\qquad ","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");b.diamond=d(g,"\\diamond ","&#9671;");b.bigtriangleup=d(g,"\\bigtriangleup ","&#9651;");b.ominus=d(g,"\\ominus ","&#8854;");b.uplus=d(g,"\\uplus ","&#8846;");b.bigtriangledown=d(g,"\\bigtriangledown ","&#9661;");b.sqcap=d(g,"\\sqcap ","&#8851;");b.triangleleft=d(g,"\\triangleleft ","&#8882;");b.sqcup=d(g,"\\sqcup ",
"&#8852;");b.triangleright=d(g,"\\triangleright ","&#8883;");b.odot=d(g,"\\odot ","&#8857;");b.bigcirc=d(g,"\\bigcirc ","&#9711;");b.dagger=d(g,"\\dagger ","&#0134;");b.ddagger=d(g,"\\ddagger ","&#135;");b.wr=d(g,"\\wr ","&#8768;");b.amalg=d(g,"\\amalg ","&#8720;");b.models=d(g,"\\models ","&#8872;");b.prec=d(g,"\\prec ","&#8826;");b.succ=d(g,"\\succ ","&#8827;");b.preceq=d(g,"\\preceq ","&#8828;");b.succeq=d(g,"\\succeq ","&#8829;");b.simeq=d(g,"\\simeq ","&#8771;");b.mid=d(g,"\\mid ","&#8739;");
b.matrixmid=d(qa,"\\matrixmid ","&#8739;");b.ll=d(g,"\\ll ","&#8810;");b.gg=d(g,"\\gg ","&#8811;");b.parallel=d(g,"\\parallel ","&#8741;");b.bowtie=d(g,"\\bowtie ","&#8904;");b.sqsubset=d(g,"\\sqsubset ","&#8847;");b.sqsupset=d(g,"\\sqsupset ","&#8848;");b.smile=d(g,"\\smile ","&#8995;");b.sqsubseteq=d(g,"\\sqsubseteq ","&#8849;");b.sqsupseteq=d(g,"\\sqsupseteq ","&#8850;");b.doteq=d(g,"\\doteq ","&#8784;");b.frown=d(g,"\\frown ","&#8994;");b.vdash=d(g,"\\vdash ","&#8870;");b.dashv=d(g,"\\dashv ",
"&#8867;");b.longleftarrow=d(g,"\\longleftarrow ","&#8592;");b.longrightarrow=d(g,"\\longrightarrow ","&#8594;");b.Longleftarrow=d(g,"\\Longleftarrow ","&#8656;");b.Longrightarrow=d(g,"\\Longrightarrow ","&#8658;");b.longleftrightarrow=d(g,"\\longleftrightarrow ","&#8596;");b.updownarrow=d(g,"\\updownarrow ","&#8597;");b.Longleftrightarrow=d(g,"\\Longleftrightarrow ","&#8660;");b.Updownarrow=d(g,"\\Updownarrow ","&#8661;");b.mapsto=d(g,"\\mapsto ","&#8614;");b.nearrow=d(g,"\\nearrow ","&#8599;");
b.hookleftarrow=d(g,"\\hookleftarrow ","&#8617;");b.hookrightarrow=d(g,"\\hookrightarrow ","&#8618;");b.searrow=d(g,"\\searrow ","&#8600;");b.leftharpoonup=d(g,"\\leftharpoonup ","&#8636;");b.rightharpoonup=d(g,"\\rightharpoonup ","&#8640;");b.swarrow=d(g,"\\swarrow ","&#8601;");b.leftharpoondown=d(g,"\\leftharpoondown ","&#8637;");b.rightharpoondown=d(g,"\\rightharpoondown ","&#8641;");b.nwarrow=d(g,"\\nwarrow ","&#8598;");b.ldots=d(g,"\\ldots ","&#8230;");b.cdots=d(g,"\\cdots ","&#8943;");b.vdots=
d(g,"\\vdots ","&#8942;");b.ddots=d(g,"\\ddots ","&#8945;");b.surd=d(g,"\\surd ","&#8730;");b.triangle=d(g,"\\triangle ","&#9653;");b.ell=d(g,"\\ell ","&#8467;");b.top=d(g,"\\top ","&#8868;");b.flat=d(g,"\\flat ","&#9837;");b.natural=d(g,"\\natural ","&#9838;");b.sharp=d(g,"\\sharp ","&#9839;");b.wp=d(g,"\\wp ","&#8472;");b.bot=d(g,"\\bot ","&#8869;");b.clubsuit=d(g,"\\clubsuit ","&#9827;");b.diamondsuit=d(g,"\\diamondsuit ","&#9826;");b.heartsuit=d(g,"\\heartsuit ","&#9825;");b.spadesuit=d(g,"\\spadesuit ",
"&#9824;");b.oint=d(g,"\\oint ","&#8750;");b.bigcap=d(g,"\\bigcap ","&#8745;");b.bigcup=d(g,"\\bigcup ","&#8746;");b.bigsqcup=d(g,"\\bigsqcup ","&#8852;");b.bigvee=d(g,"\\bigvee ","&#8744;");b.bigwedge=d(g,"\\bigwedge ","&#8743;");b.bigodot=d(g,"\\bigodot ","&#8857;");b.bigotimes=d(g,"\\bigotimes ","&#8855;");b.bigoplus=d(g,"\\bigoplus ","&#8853;");b.biguplus=d(g,"\\biguplus ","&#8846;");b.lfloor=d(g,"\\lfloor ","&#8970;");b.rfloor=d(g,"\\rfloor ","&#8971;");b.lceil=d(g,"\\lceil ","&#8968;");b.rceil=
d(g,"\\rceil ","&#8969;");b.slash=d(g,"\\slash ","&#47;");b.opencurlybrace=d(g,"\\opencurlybrace ","&#123;");b.closecurlybrace=d(g,"\\closecurlybrace ","&#125;");b.caret=d(g,"\\caret ","^");b.underscore=d(g,"\\underscore ","_");b.backslash=d(g,"\\backslash ","\\");b.vert=d(g,"|");b.perp=b.perpendicular=d(g,"\\perp ","&perp;");b.nabla=b.del=d(g,"\\nabla ","&nabla;");b.hbar=d(g,"\\hbar ","&#8463;");b.textdiv=d(g,"\\textdiv ","&#247;");b.marker=d(g,"\\marker ","&#9646;");b.msquare=d(g,"\\msquare ","&#9633;");
b.square=d(g,"\\square ","&#9744;");b.bsquare=d(g,"\\bsquare ","&#9724;");b.hspace=d(g,"\\hspace ","&#8201;");b.notequal=d(g,"\\not= ","&#8800;");b.blacksquare=d(g,"\\blacksquare= ","&#9642;");b.hybull=d(g,"\\hybull","&#8259;");b.ding=d(g,"\\ding","&#9830;");b.whiteVerticalRectangle=d(g,"\\whiteVerticalRectangle","&#9647;");b.leftFiveEigthsBlock=d(g,"\\leftFiveEigthsBlock","&#9611;");b.rightHalfBlock=d(g,"\\rightHalfBlock","&#9616;");b.space=d(g,"\\space","&#8197;");b.smallspace=d(g,"\\smallspace",
"&#8201;");b.hairspace=d(g,"\\smallspace","&#8202;");b.emptyspace=d(g,"\\emptyspace","&#8203;");b.dollar=d(g,"\\dollar","$");b.AA=b.Angstrom=b.angstrom=d(g,"\\text\\AA ","&#8491;");b.ring=b.circ=b.circle=d(g,"\\circ ","&#9702;");b.bull=b.bullet=d(g,"\\bullet ","&bull;");b.setminus=b.smallsetminus=d(g,"\\setminus ","&#8726;");b.not=b["\u00ac"]=b.neg=d(g,"\\neg ","&not;");b["\u2026"]=b.dots=b.ellip=b.hellip=b.ellipsis=b.hellipsis=d(g,"\\dots ","&hellip;");b.converges=b.darr=b.dnarr=b.dnarrow=b.downarrow=
d(g,"\\downarrow ","&darr;");b.dArr=b.dnArr=b.dnArrow=b.Downarrow=d(g,"\\Downarrow ","&dArr;");b.diverges=b.uarr=b.uparrow=d(g,"\\uparrow ","&uarr;");b.uArr=b.Uparrow=d(g,"\\Uparrow ","&uArr;");b.to=d(q,"\\to ","&rarr;");b.rarr=b.rightarrow=d(g,"\\rightarrow ","&rarr;");b.implies=d(q,"\\Rightarrow ","&rArr;");b.rArr=b.Rightarrow=d(g,"\\Rightarrow ","&rArr;");b.gets=d(q,"\\gets ","&larr;");b.larr=b.leftarrow=d(g,"\\leftarrow ","&larr;");b.impliedby=d(q,"\\Leftarrow ","&lArr;");b.lArr=b.Leftarrow=d(g,
"\\Leftarrow ","&lArr;");b.harr=b.lrarr=b.leftrightarrow=d(g,"\\leftrightarrow ","&harr;");b.iff=d(q,"\\Leftrightarrow ","&hArr;");b.hArr=b.lrArr=b.Leftrightarrow=d(g,"\\Leftrightarrow ","&hArr;");b.Re=b.Real=b.real=d(g,"\\Re ","&real;");b.Im=b.imag=b.image=b.imagin=b.imaginary=b.Imaginary=d(g,"\\Im ","&image;");b.part=b.partial=d(g,"\\partial ","&part;");b.inf=b.infin=b.infty=b.infinity=d(g,"\\infty ","&infin;");b.alef=b.alefsym=b.aleph=b.alephsym=d(g,"\\aleph ","&alefsym;");b.xist=b.xists=b.exist=
b.exists=d(g,"\\exists ","&exist;");b.and=b.land=b.wedge=d(g,"\\wedge ","&and;");b.or=b.lor=b.vee=d(g,"\\vee ","&or;");b.o=b.O=b.empty=b.emptyset=b.oslash=b.Oslash=b.nothing=b.varnothing=d(q,"\\varnothing ","&empty;");b.cup=b.union=d(q,"\\cup ","&cup;");b.cap=b.intersect=b.intersection=d(q,"\\cap ","&cap;");b.deg=b.degree=d(g,"^{\\circ} ","&deg;");b.ang=b.angle=d(g,"\\angle ","&ang;");f=ja.prototype=new w;f.respace=function(){this.jQ[0].className=this.next instanceof I||this.next instanceof F?"":
"non-italicized-function"};b.exp=b.at=b.tr=b.det=b.rk=b.adj=b.ln=b.lg=b.log=b.span=b.proj=b.det=b.dim=b.min=b.max=b.mod=b.lcm=b.gcd=b.gcf=b.hcf=b.lim=ja;(function(){var a="sin cos tan sec cosec csc cotan cot".split(" "),c;for(c in a)b[a[c]]=b[a[c]+"h"]=b["a"+a[c]]=b["arc"+a[c]]=b["a"+a[c]+"h"]=b["arc"+a[c]+"h"]=ja})();f=la.prototype;f.prev=0;f.next=0;f.parent=0;f.show=function(){this.jQ=this._jQ.removeClass("blink");"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.prev===
this.prev?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};f.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=r();return this};f.redraw=function(){for(var a=this.parent;a;a=a.parent)a.redraw&&a.redraw()};f.insertAt=function(a,c,e){var h=this.parent;this.parent=a;this.prev=c;this.next=e;h.blur()};
f.insertBefore=function(a){this.insertAt(a.parent,a.prev,a);this.parent.jQ.addClass("hasCursor");this.jQ.insertBefore(a.jQ.first());return this};f.insertAfter=function(a){this.insertAt(a.parent,a,a.next);this.parent.jQ.addClass("hasCursor");this.jQ.insertAfter(a.jQ.last());return this};f.prependTo=function(a){this.insertAt(a,0,a.firstChild);a.textarea?this.jQ.insertAfter(a.textarea):this.jQ.prependTo(a.jQ);a.focus();return this};f.appendTo=function(a){this.insertAt(a,a.lastChild,0);this.jQ.appendTo(a.jQ);
a.focus();return this};f.hopLeft=function(){this.jQ.insertBefore(this.prev.jQ.first());this.next=this.prev;this.prev=this.prev.prev;return this};f.hopRight=function(){this.jQ.insertAfter(this.next.jQ.last());this.prev=this.next;this.next=this.next.next;return this};f.moveLeft=function(){this.selection?this.insertBefore(this.selection.prev.next||this.parent.firstChild).clearSelection():this.prev?this.prev.lastChild?this.appendTo(this.prev.lastChild):this.hopLeft():this.parent.prev?this.appendTo(this.parent.prev):
this.parent!==this.root&&this.insertBefore(this.parent.parent);return this.show()};f.moveRight=function(){this.selection?this.insertAfter(this.selection.next.prev||this.parent.lastChild).clearSelection():this.next?this.next.firstChild?this.prependTo(this.next.firstChild):this.hopRight():this.parent.next?this.prependTo(this.parent.next):this.parent!==this.root&&this.insertAfter(this.parent.parent);return this.show()};f.seek=function(a,c,e){e=this.clearSelection();if(a.hasClass("empty"))return e.prependTo(a.data("[[mathquill internal data]]").block),
e;var h=a.data("[[mathquill internal data]]");if(h){if(h.cmd&&!h.block)return a.outerWidth()>2*(c-a.offset().left)?e.insertBefore(h.cmd):e.insertAfter(h.cmd),e}else a=a.parent(),(h=a.data("[[mathquill internal data]]"))||(h={block:e.root});h.cmd?e.insertAfter(h.cmd):e.appendTo(h.block);a=e.jQ.offset().left-c;do e.moveLeft(),h=a,a=e.jQ.offset().left-c;while(0<a&&(e.prev||e.parent!==e.root));-a>h&&e.moveRight();return e};f.replaceIntervalParentheses=function(a){for(var c=[],e=[],h=0;h<a.length;h++){var k=
a[h];"("===k||"["===k?e.push({ind:h,type:k}):")"===k?(k=e.pop())&&"["===k.type&&(c.push({index:k.ind,value:"LEFTCLOSED"}),c.push({index:h,value:"RIGHTOPEN"})):"]"===k&&(k=e.pop())&&"("===k.type&&(c.push({index:k.ind,value:"LEFTOPEN"}),c.push({index:h,value:"RIGHTCLOSED"}))}for(e=c.length-1;0<=e;e--)a=a.replaceAt(c[e].index,c[e].value);return a};f.writeLatex=function(a){this.root.hidePlaceholder();this.deleteSelection();if(0>a.indexOf("matrix")&&1E3<a.length)return this.hide();a=a.replace(/\\sqrt\[(.+?)\]/g,
"\\nthroot-$1-");a=a.replace(/\\nthroot\[(.+?)\]/g,"\\nthroot-$1-");a=this.replaceIntervalParentheses(a);a=a.replace(/(\\left\s*\(|\()/g,"\\left(");a=a.replace(/(\\right\s*\)|\))/g,"\\right)");a=a.replace(/(\\left\s*\[|\[)/g,"\\left[");a=a.replace(/(\\right\s*\]|\])/g,"\\right]");a=a.replace(/\\nthroot-(.+?)-/g,"\\nthroot[$1]");a=a.replace(/^\\left([\(\[])$/,"$1");a=a.replace(/^\\right([\)\]])$/,"$1");a=a.replace(/\\int(#| )(_|^)/g,"\\int$2");a=a.replace(/"/g,"");a=a.replace(/\*/g,"\\cdot ");a=a.replace(/\$/g,
"");a=a.replace(/\\%/g,"%");a=a.replace(/([a-z])\\circ/g,"$1\\:\\circ");a=a.replace(/LEFTOPEN/g,"(");a=a.replace(/LEFTCLOSED/g,"[");a=a.replace(/RIGHTOPEN/g,")");a=a.replace(/RIGHTCLOSED/g,"]");a=a.replace(/\\land/g,"\\quad\\mathrm{and}\\quad ");a=a.replace(/\\lor/g,"\\quad\\mathrm{or}\\quad ");a=a.replace(/f'/g,"f\\:'");a=(a=a.replace(/f\\prime/g,"f\\:\\prime"))&&a.match(/\\(?:begin|end){cases}|\\(?:begin|end){([pbv]|small)?matrix}|\\\\|\\mathbb{[CNPQRZ]}|\\text{([^}]|\\})*}|\\:|\\[a-z]*|[^\s]/ig)||
0;this.adjustParenScripts(a);this.parent.textarea||this.adjustVariables(a);this.adjustVariablesHE(a);(function k(e,h){if("]"==a)e.insertNew(new g(a));else for(;a.length;){var m=a.shift();if(!m||m===h||"\\end{"===m.slice(0,5))break;if("&"===m||"\\\\"===m){a.unshift("{");break}var p;if("\\begin{"===m.slice(0,7)){m=m.slice(7,-1);for(var l=p=1,y=0;;y+=1){var T=a[y];if("\\end{"===T.slice(0,5))break;else"\\\\"===T?p+=1:"&"===T&&1===p&&(l+=1)}e.insertNew(p=new b[m](x,x,p,l));a.unshift("{")}else if("\\text{"===
m.slice(0,6)){p=new J(m.slice(6,-1));e.insertNew(p).insertAfter(p);continue}else if("{"==m){k(e,"}");continue}else if(/\\mathbb\{[CNPQRZ]\}/.test(m)){p=new (b[m.slice(-2,-1)]);e.insertNew(p).insertAfter(p);continue}else if("\\left"===m||"\\right"===m)if(m=a.shift(),"\\"===m&&(m=a.shift()),e.insertCh(m),p=e.prev||e.parent.parent,e.prev)break;else a.unshift("{");else if(/^\\[a-z]+$/i.test(m))if(m=m.slice(1),p=b[m])e.insertNew(p=new p(x,m));else{p=new J(m);e.insertNew(p).insertAfter(p);continue}else p=
m.match(/[a-zA-Z\u00E1-\u00F3]/)?new B(m):(p=b[m])?new p:"#"==m||"\\:"==m?new C[" "]:new g(m),e.insertNew(p);p.eachChild(function(G){e.appendTo(G);G=a.shift();if(!G)return!1;"{"===G||"["===G?k(e,"{"===G?"}":"]"):e.insertCh(G)});e.insertAfter(p)}})(this);return this.hide()};f.write=function(a){return this.show().insertCh(a)};f.insertCh=function(a){this.selection&&(this.prev=this.selection.prev,this.next=this.selection.next);var c=a.match(/^[a-zA-Z]$/)?new B(a):(c=C[a]||b[a])?new c(this.selection,a):
new g(a);this.selection&&(c instanceof w&&this.selection.remove(),delete this.selection);return this.insertNew(c)};f.insertNew=function(a){a.insertAt(this);return this};f.insertCmd=function(a,c){var e=b[a];e?(e=new e(c,a),this.insertNew(e),e instanceof w&&c&&c.remove()):(e=new J(a),e.firstChild.focus=function(){delete this.focus;return this},this.insertNew(e).insertAfter(e),c&&c.remove());return this};f.unwrapGramp=function(){var a=this.parent.parent,c=a.parent,e=a.prev;a.eachChild(function(h){h.isEmpty()||
(h.eachChild(function(k){k.parent=c;k.jQ.insertBefore(a.jQ.first())}),(h.firstChild.prev=e)?e.next=h.firstChild:c.firstChild=h.firstChild,e=h.lastChild)});(e.next=a.next)?a.next.prev=e:c.lastChild=e;if(!this.next)if(this.prev)this.next=this.prev.next;else for(;!this.next;)if(this.parent=this.parent.next)this.next=this.parent.firstChild;else{this.next=a.next;this.parent=c;break}this.next?this.insertBefore(this.next):this.appendTo(c);a.jQ.remove();a.prev&&a.prev.respace();a.next&&a.next.respace()};
f.backspace=function(){if(!this.deleteSelection())if(this.prev)this.prev.isEmpty()?this.prev=this.prev.remove().prev:this.selectLeft();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();this.unwrapGramp()}this.prev&&this.prev.respace();this.next&&this.next.respace();this.redraw();return this};f.deleteForward=function(){if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();
else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}this.prev&&this.prev.respace();this.next&&this.next.respace();this.redraw();return this};f.selectWord=function(){if(this.parent.isEmpty())return this.selectLeft();for(var a=this.next,c=this.prev,e=a?a.precedence:c.precedence;a.precedence===e;)a=a.next;for(;c.precedence===e;)c=c.prev;a?this.insertBefore(a):this.appendTo(this.parent);this.hide().selection=
new aa(this.parent,c,a)};f.selectFrom=function(a){var c=this,e=a,h=0;a:for(;;){for(var k=this;k!==c.parent.parent;k=k.parent.parent)if(k.parent===e.parent){var m=k;var p=e;break a}for(k=a;k!==e.parent.parent;k=k.parent.parent)if(c.parent===k.parent){m=c;p=k;break a}c.parent.parent&&(c=c.parent.parent);e.parent.parent&&(e=e.parent.parent);if(1E3<h++)break a}if(m.next!==p){for(a=m;a;a=a.next)if(a===p.prev){var l=!0;break}l||(l=p,p=m,m=l)}this.hide().selection=new aa(m.parent,m.prev,p.next);this.insertAfter(p.next.prev||
p.parent.lastChild);this.root.selectionChanged()};f.selectLeft=function(){if(this.selection)if(this.selection.prev===this.prev)this.prev?(this.hopLeft().next.jQ.prependTo(this.selection.jQ),this.selection.prev=this.prev):this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{if(this.prev.jQ.insertAfter(this.selection.jQ),this.hopLeft().selection.next=this.next,this.selection.prev===this.prev){this.deleteSelection();return}}else{if(this.prev)this.hopLeft();else if(this.parent!==
this.root)this.insertBefore(this.parent.parent);else return;this.hide().selection=new aa(this.parent,this.prev,this.next.next)}this.root.selectionChanged()};f.selectRight=function(){if(this.selection)if(this.selection.next===this.next)this.next?(this.hopRight().prev.jQ.appendTo(this.selection.jQ),this.selection.next=this.next):this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{if(this.next.jQ.insertBefore(this.selection.jQ),this.hopRight().selection.prev=this.prev,
this.selection.next===this.next){this.deleteSelection();return}}else{if(this.next)this.hopRight();else if(this.parent!==this.root)this.insertAfter(this.parent.parent);else return;this.hide().selection=new aa(this.parent,this.prev.prev,this.next)}this.root.selectionChanged()};f.clearSelection=function(){this.show().selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());return this};f.deleteSelection=function(){if(!this.show().selection)return!1;this.prev=this.selection.prev;
this.next=this.selection.next;this.selection.remove();delete this.selection;this.root.selectionChanged();return!0};f.adjustVariables=function(a){for(var c=!1,e=0;e<a.length;e++){var h=a[e];"a"<=h&&"z">=h||"A"<=h&&"Z">=h||"\u00e1"<=h&&"\u00f3">=h?(c&&(a[e-1]+=a[e],a.splice(e,1),e--),c=!0):c=!1}};f.adjustVariablesHE=function(a){for(var c=!1,e=0;e<a.length;e++){var h=a[e];"\u05d0"<=h&&"\u05ea">=h||"\u0600"<=h&&"\u06ff">=h?(c&&(a[e-1]+=a[e],a.splice(e,1),e--),c=!0):c=!1}};f.adjustParenScripts=function(a){for(var c=
0;c<a.length-2;c++){var e=a[c];if("^"===e||"_"===e)if(e=a[c+2],"\\left"===a[c+1]&&"("===e){e=c+1;for(var h=1,k=c+3;0<h&&k<a.length-1;k++){var m=a[k],p=a[k+1];"\\right"===m&&")"===p?h--:"\\left"===m&&"("===p&&h++}0==h&&(a.splice(e,0,"{"),a.splice(k+2,0,"}"))}}};f=aa.prototype=new H;f.jQinit=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()};f.levelUp=function(){this.clear().jQinit(this.parent.parent.jQ);this.prev=this.parent.parent.prev;this.next=this.parent.parent.next;this.parent=
this.parent.parent.parent;return this};f.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};f.blockify=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return H.prototype.blockify.call(this)};f.detach=function(){var a=H.prototype.blockify.call(this);this.blockify=function(){this.jQ.replaceWith(a.jQ=this.jQ=this.jQ.children());return a};return this};r.fn.mathquill=function(a,c,e){switch(a){case "placeholder":return this.each(function(){var l=r(this).data("[[mathquill internal data]]");
(l=l&&l.block)&&l.setPlaceholder&&(l.setPlaceholder(c),this!==document.activeElement&&l.showPlaceholder())});case "redraw":return this.find(":not(:has(:first))").each(function(){var l=r(this).data("[[mathquill internal data]]");l&&(l.cmd||l.block)&&la.prototype.redraw.call(l.cmd||l.block)}),this;case "revert":return this.each(function(){var l=r(this).data("[[mathquill internal data]]");l&&l.revert&&l.revert()});case "latex":if(1<arguments.length)return this.each(function(){var l=r(this).data("[[mathquill internal data]]");
l&&l.block&&l.block.renderLatex&&l.block.renderLatex(c)});var h=this.data("[[mathquill internal data]]");return h&&h.block&&h.block.latex();case "text":return(h=this.data("[[mathquill internal data]]"))&&h.block&&h.block.text();case "html":return this.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var l=
r(this).data("[[mathquill internal data]]"),y=(l=l&&l.block)&&l.cursor;if(y){y.writeLatex(c);if(e!=x)for(i=0;i<e;i++)y.moveLeft();l.blur()}});case "cmd":if(1<arguments.length)return this.each(function(){var l=r(this).data("[[mathquill internal data]]"),y=(l=l&&l.block)&&l.cursor;if(y){y.writeLatex(c);if(e!=x)for(i=0;i<e;i+=1)y.moveLeft();l.blur()}});case "backspace":return this.each(function(){var l=r(this).data("[[mathquill internal data]]");l=l&&l.block;(l&&l.cursor).backspace()});case "moveleft":return this.each(function(){var l=
r(this).data("[[mathquill internal data]]"),y=(l=l&&l.block)&&l.cursor;l.focus();y.moveLeft()});case "moveright":return this.each(function(){var l=r(this).data("[[mathquill internal data]]"),y=(l=l&&l.block)&&l.cursor;l.focus();y.moveRight()});default:var k="textbox"===a,m=k||"editable"===a,p=k?ya:da;return this.each(function(){ta(r(this),new p,k,m)})}};r(function(){r(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");r(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");
r(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill()})})();
$(document).ready(function(){$(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");$(".mathquill-editable").mathquill("placeholder","\\mathrm{Enter\\:a\\:problem}");$("body").on("click",".calculator-gray-img",function(u){$(".calculator-gray-img").hide();$("button.solve").show();$(".codepadbody").show();$(".solution_div").hide();window.parent.postMessage("SYMBOLAB_CLICKED_CALC","*")});$("body").on("click",".pad-menu",function(u){u=$(this);$(".pad-menu").removeClass("selected");
u.addClass("selected");u=u.data("id");$("table.buttons").hide();$(u).show();$(u).find(".mathquill-embedded-latex").mathquill("redraw");window.parent.postMessage("SYMBOLAB_PAD_MENU_CLICKED:"+u,"*")});$("body").on("click",".pad-button",function(u){u=$(this);"undefined"!=typeof u.data("append")&&($(".mathquill-editable").mathquill("write",u.data("append"),u.data("moveleft")).focus(),window.parent.postMessage("SYMBOLAB_PAD_BUTTON_CLICKED:"+u.data("append"),"*"));return!1});$("body").on("keyup",".widgetInput",
function(u){window.parent.postMessage("SYMBOLAB_INPUT_KEYUP","*");var v=$(u.currentTarget);setTimeout(function(){var w=getWidth(v);w>maxInputWidth?(v.css("width",w),v.parent().css("overflow-x","scroll").css("overflow-y","hidden"),v.parent().scrollLeft(w)):(v.parent().css("overflow","hidden").css("overflow","hidden"),v.css("width",290))},10)})});function symbolab_log2(u,v,w,z){z||=null;return $.ajax({type:"POST",url:"/detailedLog",data:{type:u,info1:v,info2:w,query:z}})}
function getWidth(u){var v=0;$(u).children().each(function(){$(this).is(":visible:not(.selectable)")&&(v+=getWidthElement($(this),!0))});return v*=1.1}
function getWidthElement(u,v){var w=0;if(u.hasClass("block")||u.hasClass("numerator")||u.hasClass("denominator"))u.children().each(function(){w+=getWidth($(this),v)});else{if(u.hasClass("fraction")){var z=getWidth($(u.children()[0]),v);u=getWidth($(u.children()[1]),v);return Math.max(z+10,u+10)}u.hasClass("roman")?v&&u.children().each(function(){w+=$(this).outerWidth()}):w=u.outerWidth()}return w};
