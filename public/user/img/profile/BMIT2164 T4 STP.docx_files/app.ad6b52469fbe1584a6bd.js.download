!function(t){function e(e){for(var i,c,r=e[0],s=e[1],l=e[2],f=0,d=[];f<r.length;f++)c=r[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(u&&u(e);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(i=!1)}i&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},o={0:0},a=[];function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/assets/js/compiled/";var r=window.webpackJsonpnotifications=window.webpackJsonpnotifications||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=s;a.push([87,1]),n()}({0:function(t,e){t.exports=window.React},1:function(t,e,n){t.exports={isAccentOrange:"isAccentOrange-1f1Gi",btn:"btn-1fZq_","notifications-header-button":"notifications-header-button-1fSWf",notificationsHeaderButton:"notifications-header-button-1fSWf",isActive:"isActive-1UH6f","notifications-icon":"notifications-icon-tLa4U",notificationsIcon:"notifications-icon-tLa4U",headerButtonWhite:"headerButtonWhite-3wN3W","unseen-count":"unseen-count-2lr7d",unseenCount:"unseen-count-2lr7d",unseenCountWhite:"unseenCountWhite-3taLJ","ch-notifications-panel":"ch-notifications-panel-2sb2_",chNotificationsPanel:"ch-notifications-panel-2sb2_","notifications-panel-title":"notifications-panel-title-3FJaN",notificationsPanelTitle:"notifications-panel-title-3FJaN","ch-notification-number":"ch-notification-number-2zya5",chNotificationNumber:"ch-notification-number-2zya5",chNotificationNumberWhite:"chNotificationNumberWhite-14kD7","notification-dropdown-list":"notification-dropdown-list-2BfcK",notificationDropdownList:"notification-dropdown-list-2BfcK","notification-list-item":"notification-list-item-3iB4G",notificationListItem:"notification-list-item-3iB4G","is-unread":"is-unread-1ww4z",isUnread:"is-unread-1ww4z","notification-action-btn":"notification-action-btn-2jOKi",notificationActionBtn:"notification-action-btn-2jOKi","notification-type-icon":"notification-type-icon-uqPke",notificationTypeIcon:"notification-type-icon-uqPke","notification-content":"notification-content-3PVK3",notificationContent:"notification-content-3PVK3","notification-subtitle":"notification-subtitle-7vtfS",notificationSubtitle:"notification-subtitle-7vtfS","subtitle-item":"subtitle-item-ADSaE",subtitleItem:"subtitle-item-ADSaE","empty-state-container":"empty-state-container-Gzo_h",emptyStateContainer:"empty-state-container-Gzo_h","empty-state-message":"empty-state-message-15d4N",emptyStateMessage:"empty-state-message-15d4N","loading-state-container":"loading-state-container-2EC2P",loadingStateContainer:"loading-state-container-2EC2P"}},34:function(t,e){t.exports=window.ReactDOM},8:function(t,e,n){t.exports={"swaying-item":"swaying-item-3LhIm",swayingItem:"swaying-item-3LhIm","sway-back-and-forth":"sway-back-and-forth-1N-6Y",swayBackAndForth:"sway-back-and-forth-1N-6Y","spinning-item":"spinning-item-1vWn8",spinningItem:"spinning-item-1vWn8",spin:"spin-3bGL2"}},87:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n(34);var a=window.connectionHandler;const c=t=>({...t,notification_date:new Date(t.notification_date),acknowledged:!!t.acknowledged}),r=async(t,e)=>{const n=await fetch(t,e);return n.ok?Promise.resolve(n):Promise.reject(n)},s=async()=>{const t=await r("/api/v1/users/notifications/info/");if(204===t.status)return{notification_count:0,unseen_count:0,newest_notification:new Date(0)};const e=await t.json();return{notification_count:parseInt(e.notification_count),unseen_count:parseInt(e.unseen_count),newest_notification:new Date(e.newest_notification)}},l=async({before:t,since:e,id:n}={})=>{const i=await r(`/api/v1/users/notifications/${d({before:t?f(t):void 0,since:e?f(e):void 0,id:n})}`);return 204===i.status?[]:(await i.json()).map(c)},u=async t=>r(`/api/v1/users/notifications/seen/${d({before:t?f(t):void 0})}`,{method:"POST"}),f=t=>Math.floor(t.getTime()/1e3),d=t=>{const e=[];for(const[n,i]of Object.entries(t))null!=i&&e.push(`${n}=${encodeURIComponent(i)}`);return 0===e.length?"":`?${e.join("&")}`};var m=n(1),p=n(3),h=n.n(p);var _=function({onClick:t,isActive:e,notificationUnseenCount:n,theme:o}){return i.createElement("button",{type:"button","aria-label":e?"Close notifications":"Open notifications",onClick:t,className:h()(m.notificationsHeaderButton,e&&m.isActive,"white"===o&&m.headerButtonWhite),"data-cha-target-name":"check_notifications_btn","data-cha-action-type":"view","data-cha-action-target-type":"notifications"},i.createElement("i",{className:h()("fa fa-bell-o",m.notificationsIcon)}),n&&n>0?i.createElement("span",{className:h()(m.unseenCount,"white"===o&&m.unseenCountWhite),"aria-label":`${n} new notifications`},n):null)};var w=class extends i.Component{constructor(t){super(t),this.state={}}static getDerivedStateFromError(t){return{error:t}}render(){return this.state.error?i.createElement("div",null,i.createElement("h5",null,"Oops, something went wrong."),i.createElement("p",null,"Try refreshing the page. If the problem continues, please"," ",i.createElement("a",{href:"https://support.coursehero.com/hc/en-us"},"contact us"),".")):this.props.children}},g=n(8);var v=function(){return i.createElement("div",{className:m.emptyStateContainer},i.createElement("img",{className:g.swayingItem,src:"/assets/img/no-notifications.svg",alt:"Notification bell",width:"50",height:"50"}),i.createElement("p",{className:m.emptyStateMessage},"You have no notifications!"))},E=n(35);let b,y,N=window.dataLayer;var I;!function(t){t.PRIMARY="Primary",t.SECONDARY="Secondary",t.INTERSTITIAL="Interstitial",t.BANNER="Banner",t.LINK="Link",t.IMAGE="Image"}(b||(b={})),function(t){t.TAB="Tab",t.POPUP="Pop-up",t.VIDEO="Video",t.MODAL="modal",t.RADIO_BUTTON="radio button",t.RADIO_SELECTION="Radio Selection",t.SECURE_PAYMENT_FORM="Secure Payment Form",t.CALL_TO_ACTION="Call to Action",t.FLOATING_PROMPT="Floating Prompt",t.INPUT="Input",t.FORM="Form",t.NAVBAR="Navbar"}(y||(y={})),function(t){t.LOGGED_OUT="logged out",t.BASIC="basic",t.PREMIER="premier"}(I||(I={}));const O=(t,e={},{timestamp:n}={})=>{var i,o,a,c,r;const s={...e,isLoggedIn:Boolean(null==(i=window.__CH_PERSON)?void 0:i.id),chSessionId:null==(o=window)?void 0:null==(a=o.__CH_DIMENSIONS)?void 0:a.dimension6,chRootSessionId:null==(c=window)?void 0:null==(r=c.__CH_DIMENSIONS)?void 0:r.dimension7};void 0!==N&&N.push({event:"User Tracking Event",user_tracking_properties:{eventName:t,properties:s},_clear:!0});const l=window.amplitude;var u,f,d,m,p,h,_,w;l?(null!=(u=window)&&null!=(f=u.__CH_PERSON)&&f.id&&l.getInstance().setUserId(window.__CH_PERSON.id),null!=(d=window)&&null!=(m=d.__CH_TRACKER)&&m.DEVICE_ID&&l.getInstance().setDeviceId(window.__CH_TRACKER.DEVICE_ID),null!=(p=window)&&null!=(h=p.__CH_TRACKER)&&h.SESSION&&l.getInstance().setSessionId(window.__CH_TRACKER.SESSION),n?l.getInstance().logEventWithTimestamp(t,s,n):l.getInstance().logEvent(t,s)):null==(_=window.__CH_TRACKER)||null==(w=_.BUFFER)||w.push({eventName:t,properties:s})},C=t=>{var e;const n=R(),i={path:location.pathname,referrer:window.__CH_ReactRouter_referrer||document.referrer,search:location.search,title:document.title,pageUrl:location.href,userAgent:null!=(e=window.__USER_AGENT)?e:"",userState:n};if(void 0!==t){const{path:e,referrer:o,search:a,title:c,pageUrl:r,userAgent:s}=t;return{path:e||i.path,referrer:o||i.referrer,search:a||i.search,title:c||i.title,pageUrl:r||i.pageUrl,userAgent:s||i.userAgent,userState:n}}return i},S=t=>({...C(),...t}),R=()=>{const t=window.__CH_PERSON;return t?t.dimension2===I.BASIC?I.BASIC:I.PREMIER:I.LOGGED_OUT},k=(t,e)=>{(t=>{O("CTA Clicked",S(t))})({actionType:b.SECONDARY,text:t,intent:e||t})},A=t=>{if(("url"==t.action_type||"hash"==t.action_type)&&t.action_data&&t.action_data.url){var e=t.action_data.url;for(var n in t.action_params)t.action_params.hasOwnProperty(n)&&(e=e.replace(":"+n,t.action_params[n].toString()));if("hash"==t.action_type){var i="#/"+t.action_data.url;window.location.hash=i}else"url"==t.action_type&&(window.location.href=e)}},P=(t,e)=>{const n=(e.getTime()-t.getTime())/1e3;if(n<60)return"now";if(n<3600){const t=Math.floor(n/60);return`${t} minute${1===t?"":"s"} ago`}if(n<=86400){const t=Math.floor(n/3600);return`${t} hour${1===t?"":"s"} ago`}if(n<=604800){const t=Math.floor(n/86400);return`${t} day${1===t?"":"s"} ago`}const i=t.getDate(),o=t.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),a=t.getFullYear()==e.getFullYear()?"":" "+t.getFullYear();return`${o} ${i}`+(a?`, ${a}`:"")};var T=function({notification:t,onAcknowledgeClick:e,onRemoveClick:n}){const[o,a]=Object(i.useState)(()=>new Date),c=new E.Parser;return i.createElement("li",{className:h()(m.notificationListItem,!t.acknowledged&&m.isUnread)},i.createElement("i",{className:h()("fa",t.icon_class,m.notificationTypeIcon)}),i.createElement("div",{className:m.notificationContent},i.createElement("button",{type:"button",className:h()(m.btn,m.notificationActionBtn),onClick:()=>{k(t.title,"View Notification"),t.acknowledged||e(),A(t)},"data-cha-target-name":"view_notification_link","data-cha-action-type":"view","data-cha-action-target-type":"notification","data-cha-location":"header","data-cha-action-target-id":t.notification_id},c.parse(t.title)),i.createElement("div",{className:m.notificationSubtitle},i.createElement("span",{className:m.subtitleItem},i.createElement("i",{className:"fa fa-clock-o"}),P(t.notification_date,o)),!t.acknowledged&&i.createElement("button",{type:"button",className:h()(m.btn,m.subtitleItem),onClick:()=>{e(),k("Mark As Read")},"data-cha-target-name":"acknowledge_notification_btn","data-cha-action-type":"acknowledge","data-cha-action-target-type":"notification","data-cha-location":"header","data-cha-action-target-id":t.notification_id},i.createElement("i",{className:"fa fa-eye"})," Mark as Read"))),i.createElement("button",{type:"button",className:m.btn,"aria-label":"Remove notification",onClick:()=>{k("X","Remove Notification"),t.acknowledged||e(),n()},"data-cha-target-name":"remove_notification_btn","data-cha-action-type":"remove","data-cha-action-target-type":"notification","data-cha-location":"header","data-cha-action-target-id":t.notification_id},i.createElement("i",{className:"fa fa-times"})))};var j=function(){return i.createElement("i",{className:h()("chi-loading",g.spinningItem)})};const L=(t,e)=>{switch(t){case"idle":switch(e.type){case"start_fetch":return"fetching";default:return t}case"fetching":switch(e.type){case"fetch_success":return"idle";case"fetch_error":return"error";default:return t}case"error":return t}};var D=function({scrollContainerRef:t,reachedEnd:e,onLoadMore:n}){const[o,a]=Object(i.useReducer)(L,"idle"),c=Object(i.useRef)(!1);return Object(i.useEffect)(()=>{const n=t.current;if(!n)return;const i=()=>{n.scrollHeight-(n.scrollTop+n.clientHeight)<100&&!e&&a({type:"start_fetch"})};return i(),n.addEventListener("scroll",i),()=>{n.removeEventListener("scroll",i)}},[t,e]),Object(i.useEffect)(()=>{if("fetching"!==o)return void(c.current=!1);if(c.current)return;let t=!0;return c.current=!0,n().then(()=>{t&&a({type:"fetch_success"})}).catch(()=>{t&&a({type:"fetch_error"})}),()=>{t=!1}},[o,n]),{status:o}};var M=function({notifications:t,onLoadMore:e,reachedEnd:n,onRemoveNotification:o,onAcknowledgeNotification:a}){const c=Object(i.useRef)(null),{status:r}=D({scrollContainerRef:c,reachedEnd:n,onLoadMore:e});return i.createElement("ul",{ref:c,className:m.notificationDropdownList},"idle"===r&&0===t.length?i.createElement("li",null,i.createElement(v,null)):t.map(t=>i.createElement(T,{key:t.notification_id,notification:t,onAcknowledgeClick:()=>a(t),onRemoveClick:()=>o(t)})),"fetching"===r&&i.createElement("li",{className:m.loadingStateContainer},i.createElement(j,null)),"error"===r&&i.createElement("li",null,i.createElement("i",{className:"chi-alert-filled"})," There was a problem getting your notifications"))};const B=i.forwardRef((function({isOpen:t,newestNotification:e,unacknowledgedCount:n,decrementUnacknowledgeCount:o,userId:s,isPollingActive:u},f){const[d,p]=U(),[h,_]=Object(i.useState)(!1),g=Object(i.useRef)(!0);Object(i.useEffect)(()=>{if(!u){const t=t=>{p({type:"receive_notifications",notifications:[c(t.data.notification)]})},e=a.subscribe(`v1.notification_bell.${s}.owner`,t);return()=>{e()}}e&&d.length>0&&d[0].notification_date<e&&l({since:d[0].notification_date,id:d[0].notification_id}).then(t=>{g.current&&p({type:"receive_notifications",notifications:t})})},[e,d,p,u,s]),Object(i.useEffect)(()=>()=>{g.current=!1},[]);return t?i.createElement("div",{ref:f,className:m.chNotificationsPanel},i.createElement(w,null,i.createElement("h5",{className:m.notificationsPanelTitle},"Notifications"," ",void 0!==n&&i.createElement("span",{className:m.chNotificationNumber},n)),i.createElement(M,{notifications:d,onLoadMore:()=>(()=>{if(0===d.length)return l();const t=d[d.length-1];return l({before:t.notification_date,id:t.notification_id})})().then(t=>{g.current&&(0===t.length?_(!0):p({type:"receive_notifications",notifications:t}))}),reachedEnd:h,onRemoveNotification:t=>{(async t=>r(`/api/v1/users/notifications/${t.notification_id}/`,{method:"DELETE"}))(t),p({type:"remove",notificationId:t.notification_id})},onAcknowledgeNotification:t=>{(async t=>r(`/api/v1/users/notifications/${t.notification_id}/acknowledge/`,{method:"POST"}))(t),o(),p({type:"acknowledge",notificationId:t.notification_id})}}))):null})),U=()=>{return Object(i.useReducer)((t,e)=>{switch(e.type){case"receive_notifications":return[...t,...e.notifications].sort((t,e)=>e.notification_date.getTime()-t.notification_date.getTime());case"acknowledge":return t.map(t=>t.notification_id===e.notificationId?{...t,acknowledged:!0}:t);case"remove":return t.filter(t=>t.notification_id!==e.notificationId);default:throw new Error}},[])};var H=B;const $=i.createContext("blue"),F=27;const W=(t,e,n)=>{const[o,c]=Object(i.useReducer)((e,n)=>{if(!e){switch(n.type){case"set_info":return n.info}return e}switch(n.type){case"set_info":return new Date(n.info.newest_notification).getTime()===e.newest_notification.getTime()?e:{...n.info,unseen_count:t?0:n.info.unseen_count};case"decrement_unacknowledged_count":return{...e,notification_count:e.notification_count-1};case"mark_all_seen":return{...e,unseen_count:0};case"receive_new_notification":return{unseen_count:t?0:e.unseen_count+1,notification_count:e.notification_count+1,newest_notification:new Date(n.date)};default:throw new Error}},null),r=!!o;return Object(i.useEffect)(()=>{if(!r){let t=!0;return s().then(e=>{t&&c({type:"set_info",info:e})}),()=>{t=!1}}if(n){let t=!0;const e=window.setInterval(()=>{s().then(e=>{t&&c({type:"set_info",info:e})})},12e4);return()=>{window.clearInterval(e)}}{const t=t=>{c({type:"receive_new_notification",date:t.data.notification.notification_date})},n=a.subscribe(`v1.notification_bell.${e}.owner`,t);return()=>{n()}}},[r,n,e]),[o,c]};var G=function(t){const{userId:e,isPollingActive:n,theme:o}=t,[a,c]=Object(i.useState)(!1),[r,s]=W(a,e,n),l=Object(i.useRef)(null);Object(i.useEffect)(()=>{if(!a)return;const t=t=>{l.current&&l.current!==t.target&&!l.current.contains(t.target)&&c(!1)},e=t=>{t.keyCode===F&&c(!1)};return document.addEventListener("mousedown",t),document.addEventListener("keydown",e),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",e)}},[a]);const f=null==r?void 0:r.newest_notification;return Object(i.useEffect)(()=>{a&&(s({type:"mark_all_seen"}),u(f))},[a,f,s]),i.createElement($.Provider,{value:o},i.createElement(_,{theme:o,onClick:()=>{a||k("Notification Bell","Open Notifications Menu"),c(t=>!t)},isActive:a,notificationUnseenCount:null==r?void 0:r.unseen_count}),i.createElement(H,{ref:l,isOpen:a,newestNotification:null==r?void 0:r.newest_notification,unacknowledgedCount:null==r?void 0:r.notification_count,decrementUnacknowledgeCount:()=>s({type:"decrement_unacknowledged_count"}),userId:e,isPollingActive:n}))};const x=document.getElementById("ch_notifications_action");if(x){const t=window.__CH_PERSON,e=parseInt(t.id),n="1"===x.dataset.isPollingActive||void 0===a,c=x.dataset.theme||"blue";o.render(i.createElement(i.StrictMode,null,i.createElement(G,{userId:e,isPollingActive:n,theme:c})),x)}}});
//# sourceMappingURL=app.ad6b52469fbe1584a6bd.js.map